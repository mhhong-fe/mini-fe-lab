<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<title>高清 Canvas 时钟</title>
<style>
  body { display: flex; justify-content: center; align-items: center; height: 100vh; background: #2c3e50; }
  canvas { border-radius: 50%; box-shadow: 0 0 20px rgba(0,0,0,0.5); }
</style>
</head>
<body>
<canvas id="clock" width="400" height="400"></canvas>
<script>
const canvas = document.getElementById('clock');
const ctx = canvas.getContext('2d');

const dpr = window.devicePixelRatio || 1;
const width = 400;
const height = 400;

// 调整画布像素
canvas.width = width * dpr;
canvas.height = height * dpr;
canvas.style.width = width + 'px';
canvas.style.height = height + 'px';
ctx.scale(dpr, dpr); // 坐标和 CSS 像素一致

const radius = width / 2;
ctx.translate(radius, radius); // 原点移到中心
const clockRadius = radius * 0.9;

function drawClockFace() {
    ctx.save();
    ctx.beginPath();
    ctx.arc(0, 0, clockRadius, 0, 2*Math.PI);
    ctx.fillStyle = '#fff';
    ctx.fill();
    ctx.lineWidth = 8;
    ctx.strokeStyle = '#333';
    ctx.stroke();
    ctx.shadowColor = 'rgba(0,0,0,0.3)';
    ctx.shadowBlur = 10;
    ctx.shadowOffsetX = 3;
    ctx.shadowOffsetY = 3;

    for (let i = 0; i < 60; i++) {
        let angle = i * Math.PI / 30;
        let len = i % 5 === 0 ? 15 : 7;
        ctx.beginPath();
        ctx.moveTo(Math.cos(angle) * (clockRadius - len), Math.sin(angle) * (clockRadius - len));
        ctx.lineTo(Math.cos(angle) * clockRadius, Math.sin(angle) * clockRadius);
        ctx.lineWidth = i % 5 === 0 ? 3 : 1;
        ctx.strokeStyle = '#333';
        ctx.stroke();
    }

    ctx.font = `${clockRadius * 0.15}px sans-serif`;
    ctx.fillStyle = '#333';
    ctx.textAlign = 'center';
    ctx.textBaseline = 'middle';
    for (let num = 1; num <= 12; num++) {
        let ang = num * Math.PI / 6;
        let x = Math.cos(ang - Math.PI/2) * (clockRadius - 30);
        let y = Math.sin(ang - Math.PI/2) * (clockRadius - 30);
        ctx.fillText(num.toString(), x, y);
    }
    ctx.restore();
}

function drawHand(pos, length, width, color) {
    ctx.save();
    ctx.rotate(pos);
    ctx.beginPath();
    ctx.moveTo(0,0);
    ctx.lineTo(0, -length);
    ctx.lineWidth = width;
    ctx.lineCap = 'round';
    ctx.strokeStyle = color;
    ctx.stroke();
    ctx.restore();
}

function drawClock() {
    ctx.clearRect(-radius, -radius, width, height);
    drawClockFace();

    const now = new Date();
    const sec = now.getSeconds();
    const min = now.getMinutes() + sec / 60;
    const hr = now.getHours() % 12 + min / 60;

    drawHand(hr * Math.PI / 6, clockRadius * 0.5, 6, '#2c3e50');
    drawHand(min * Math.PI / 30, clockRadius * 0.7, 4, '#34495e');
    drawHand(sec * Math.PI / 30, clockRadius * 0.85, 2, '#e74c3c');

    ctx.beginPath();
    ctx.arc(0, 0, 6, 0, 2*Math.PI);
    ctx.fillStyle = '#2c3e50';
    ctx.fill();
}

setInterval(drawClock, 1000);
drawClock();
</script>
</body>
</html>