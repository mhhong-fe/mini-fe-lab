<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>Canvas é£è½¦æ—‹è½¬ç¤ºä¾‹</title>
  <style>
    body {
      display: flex;
      flex-direction: column;
      align-items: center;
      font-family: system-ui, sans-serif;
      background: #f0f0f0;
      padding: 40px;
    }
    canvas {
      border: 1px solid #ccc;
      background: #fff;
    }
  </style>
</head>
<body>
  <h2>ğŸ¨ Canvas é£è½¦æ—‹è½¬</h2>
  <canvas id="canvas" width="400" height="400"></canvas>

  <script>
    const canvas = document.getElementById("canvas");
    const ctx = canvas.getContext("2d");

    // é«˜åˆ†å±é€‚é…
    const dpr = window.devicePixelRatio || 1;
    canvas.width = 400 * dpr;
    canvas.height = 400 * dpr;
    canvas.style.width = "400px";
    canvas.style.height = "400px";
    ctx.scale(dpr, dpr);

    const cx = 200;
    const cy = 200;

    function drawBlade(color) {
      ctx.fillStyle = color;
      ctx.beginPath();
      ctx.moveTo(0,0);
      ctx.lineTo(80, -20);
      ctx.lineTo(80, 20);
      ctx.closePath();
      ctx.fill();
      ctx.strokeStyle = "#333";
      ctx.lineWidth = 1;
      ctx.stroke();
    }

    const colors = ["#ff4d4f","#ffa940","#73d13d","#40a9ff"];
    let angle = 0; // æ—‹è½¬è§’åº¦

    function drawWindmill() {
      ctx.clearRect(0,0,400,400);

      // ç»˜åˆ¶æ—‹è½¬å¶ç‰‡
      for(let i=0;i<4;i++){
        ctx.save();
        ctx.translate(cx, cy);
        ctx.rotate(angle + i * Math.PI/2);
        drawBlade(colors[i]);
        ctx.restore();
      }

      // é£è½¦è½´
      ctx.beginPath();
      ctx.arc(cx, cy, 15, 0, Math.PI*2);
      ctx.fillStyle = "#333";
      ctx.fill();

      // é£è½¦æ”¯æ¶
      ctx.beginPath();
      ctx.moveTo(cx,cy+15);
      ctx.lineTo(cx, 350);
      ctx.lineWidth = 6;
      ctx.strokeStyle = "#555";
      ctx.stroke();
    }

    function animate() {
      angle += 0.02; // æ¯å¸§å¢åŠ çš„è§’åº¦
      drawWindmill();
      requestAnimationFrame(animate);
    }

    animate(); // å¯åŠ¨åŠ¨ç”»
  </script>
</body>
</html>